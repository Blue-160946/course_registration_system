{% extends 'core/base.html' %}
{% block title %}รายละเอียดนิสิต - {{ student.profile.student_name }}{% endblock %}

{% block content %}
<div class="container py-4">

    <div class="card shadow-sm mb-4 border-0" style="border-top: 3px solid #fd7e14;">
        <div class="card-header bg-orange-light">
            <div class="d-flex justify-content-between align-items-center">
                <h3 class="mb-0 text-orange">
                    <i class="bi bi-person-badge me-2"></i>รายละเอียดนิสิต
                </h3>
                <span class="badge bg-orange">{{ student.profile.student_status }}</span>
            </div>
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-md-6">
                    <div class="info-item mb-3">
                        <div class="text-muted small">รหัสนิสิต</div>
                        <div class="fw-bold">{{ student.profile.student_id|default:"-" }}</div>
                    </div>
                    <div class="info-item mb-3">
                        <div class="text-muted small">ชื่อ-สกุล</div>
                        <div class="fw-bold">{{ student.profile.first_name_th|default:"-" }} {{ student.profile.last_name_th|default:"-" }}</div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="info-item mb-3">
                        <div class="text-muted small">คณะ</div>
                        <div>{{ student.profile.branch.department.faculty.name|default:"-" }}</div>
                    </div>
                    <div class="info-item mb-3">
                        <div class="text-muted small">ภาควิชา</div>
                        <div>{{ student.profile.branch.department.name|default:"-" }}</div>
                    </div>
                    <div class="info-item mb-3">
                        <div class="text-muted small">สาขาวิชา</div>
                        <div>{{ student.profile.branch.name|default:"-" }}</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="card shadow-sm border-0" style="border-top: 3px solid #fd7e14;">
        <div class="card-header bg-orange-light">
            <h3 class="mb-0 text-orange">
                <i class="bi bi-journal-bookmark me-2"></i>รายวิชาที่ลงทะเบียน
            </h3>
        </div>
        <div class="card-body p-0">
            {% if student.enrolled_sections.all %}
            <div class="table-responsive">
                <table class="table table-hover mb-0">
                    <thead class="bg-orange-light">
                        <tr>
                            <th class="ps-4">ภาคเรียน</th>
                            <th>รหัสวิชา</th>
                            <th>ชื่อวิชา</th>
                            <th>กลุ่ม</th>
                            <th>วัน-เวลาเรียน</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for section in student.enrolled_sections.all %}
                        <tr>
                            <td class="ps-4">{{ section.semester }}</td>
                            <td>{{ section.course.code }}</td>
                            <td>{{ section.course.name }}</td>
                            <td>
                                <span class="badge bg-orange-light text-orange">
                                    {{ section.section_number }}
                                </span>
                            </td>
                            <td>
                                <span class="badge bg-light text-dark me-2">
                                    {{ section.get_day_display }}
                                </span>
                                {{ section.start_time|time:"H:i" }} - {{ section.end_time|time:"H:i" }}
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
            {% else %}
            <div class="text-center py-4 text-muted">
                <i class="bi bi-journal-x fs-4 d-block mb-2 text-orange"></i>
                ยังไม่มีรายวิชาที่ลงทะเบียน
            </div>
            {% endif %}
        </div>
        <div class="card-footer bg-white border-0">
            <a href="{% url 'users:student-list' %}" class="btn btn-outline-orange">
                <i class="bi bi-arrow-left me-1"></i> กลับไปหน้ารายการ
            </a>
        </div>
    </div>
</div>

<style>

    .bg-orange-light {
        background-color: #fff8f0;
    }
    .text-orange {
        color: #fd7e14;
    }
    .bg-orange {
        background-color: #fd7e14;
        color: white;
    }
    .btn-outline-orange {
        color: #fd7e14;
        border-color: #fd7e14;
    }
    .btn-outline-orange:hover {
        background-color: #fd7e14;
        color: white;
    }
    

    .card {
        border-radius: 0.5rem;
    }
    

    .info-item {
        padding: 0.75rem;
        border-radius: 0.5rem;
        background-color: #f8f9fa;
    }
    

    .table-hover tbody tr:hover {
        background-color: rgba(253, 126, 20, 0.05);
    }
    

    .badge {
        padding: 0.35em 0.65em;
        font-weight: 500;
        border-radius: 0.25rem;
    }
</style>
{% endblock %}